<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Clicker Game</title>
  <style>
    :root{
      --bg1:#0b1020; --bg2:#111827; --ink:#e5e7eb; --muted:#9ca3af;
      --card:#111827cc; --border:#ffffff22; --accent:#22d3ee; --accent2:#a78bfa;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:
        radial-gradient(900px 500px at 100% -10%, rgba(34,211,238,.12), transparent),
        radial-gradient(800px 400px at -20% 20%, rgba(167,139,250,.12), transparent),
        linear-gradient(180deg,var(--bg1),var(--bg2));
    }
    .container{max-width:900px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1{margin:0;font-size:clamp(22px,4vw,30px)}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 14px;border:1px solid var(--border);border-radius:12px;
      background:#ffffff0a;color:#fff;cursor:pointer;font-weight:700
    }
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    @media (max-width: 860px){ .grid{grid-template-columns:1fr} }

    .card{border:1px solid var(--border);background:var(--card);border-radius:16px}
    .pad{padding:16px}

    /* Stats */
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    .stat{background:#ffffff09;border:1px solid var(--border);border-radius:12px;padding:10px}
    .label{color:var(--muted);font-size:12px}
    .value{font-weight:800;font-size:22px}

    /* Orb */
    .playzone{display:grid;place-items:center;padding:24px;position:relative;overflow:hidden}
    .glow1,.glow2{position:absolute;filter:blur(80px);opacity:.35;pointer-events:none}
    .glow1{width:400px;height:400px;background:radial-gradient(circle,var(--accent2),transparent 60%)}
    .glow2{width:500px;height:500px;background:radial-gradient(circle,var(--accent),transparent 60%)}
    .orb{
      position:relative; width:220px;height:220px;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #fff 0%, #cffafe 6%, var(--accent) 40%, var(--accent2) 100%);
      border:2px solid #ffffff66; box-shadow:0 0 60px rgba(34,211,238,.25),0 0 60px rgba(167,139,250,.25);
      display:grid;place-items:center; font-weight:900; color:#0b1020; letter-spacing:.8px;
      user-select:none; cursor:pointer;
      transition:transform .05s ease;
    }
    .orb:hover{transform:scale(1.02)}
    .orb:active{transform:scale(.96)}
    .pulse{position:absolute;inset:10px;border-radius:50%;background:#ffffff22;animation:pulse 2.2s ease-in-out infinite}
    @keyframes pulse{0%{transform:scale(1);opacity:.15}50%{transform:scale(1.05);opacity:.4}100%{transform:scale(1);opacity:.15}}
    .float{position:absolute;color:white;font-weight:800;text-shadow:0 2px 6px rgba(0,0,0,.35)}

    /* Shop */
    .shop-item{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px;border:1px dashed var(--border);border-radius:12px}
    .shop-item + .shop-item{margin-top:10px}
    .muted{color:var(--muted)}
    .progress{height:8px;background:#ffffff14;border-radius:9999px;overflow:hidden}
    .progress > div{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2))}
    footer{margin-top:16px;color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>âš¡ My Clicker Game</h1>
      <div>
        <button id="reset" class="btn">Reset</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left: Play area -->
      <section class="card pad playzone">
        <div class="glow1"></div><div class="glow2"></div>
        <button id="orb" class="orb">CLICK<div class="pulse"></div></button>
        <div id="floatLayer" style="position:absolute;inset:0;pointer-events:none"></div>

        <div class="stats" style="width:100%;margin-top:20px">
          <div class="stat">
            <div class="label">Total Energy</div>
            <div id="score" class="value">0</div>
          </div>
          <div class="stat">
            <div class="label">Per Click</div>
            <div id="perClick" class="value">1.00</div>
          </div>
          <div class="stat">
            <div class="label">Energy / sec</div>
            <div id="cps" class="value">0.00</div>
          </div>
        </div>
      </section>

      <!-- Right: Shop / Info -->
      <aside class="card pad">
        <h3 style="margin:4px 0 12px">ðŸ›’ Upgrades</h3>

        <div class="shop-item">
          <div>
            <div><strong>Multiplier</strong> <span class="muted">(+25% per click)</span></div>
            <div class="muted" id="multInfo">Level 0 â€¢ Cost: 25</div>
            <div class="progress" style="margin-top:6px"><div id="multProg" style="width:0%"></div></div>
          </div>
          <button id="buyMult" class="btn">Buy</button>
        </div>

        <div class="shop-item">
          <div>
            <div><strong>Auto Clicker</strong> <span class="muted">(+1/sec)</span></div>
            <div class="muted" id="autoInfo">Owned 0 â€¢ Cost: 50</div>
            <div class="progress" style="margin-top:6px"><div id="autoProg" style="width:0%"></div></div>
          </div>
          <button id="buyAuto" class="btn">Buy</button>
        </div>

        <div class="shop-item">
          <div>
            <div><strong>Crit Chance</strong> <span class="muted">(5Ã— on crit)</span></div>
            <div class="muted" id="critInfo">Chance 3% â€¢ Cost: 200</div>
            <div class="progress" style="margin-top:6px"><div id="critProg" style="width:0%"></div></div>
          </div>
          <button id="buyCrit" class="btn">Buy</button>
        </div>

        <hr style="margin:14px 0;border:0;border-top:1px solid var(--border)">
        <div class="muted">Tip: spam-click the orb, then invest in Auto Clickers.</div>
      </aside>
    </div>

    <footer>Autosaves every 1.5s â€¢ Works offline â€¢ Single HTML file</footer>
  </div>

  <script>
    // --- Utilities
    const fmt = (n)=> n>=1e9? (n/1e9).toFixed(2)+'b'
                 : n>=1e6? (n/1e6).toFixed(2)+'m'
                 : n>=1e3? (n/1e3).toFixed(2)+'k'
                 : Math.floor(n).toString();

    const clamp=(v,min,max)=>Math.min(max,Math.max(min,v));
    const priceMult = (level)=> Math.floor(25 * Math.pow(1.3, level));
    const priceAuto = (count)=> Math.floor(50 * Math.pow(1.45, count));
    const priceCrit = (chance)=> Math.floor(200 * Math.pow(1.9, Math.round(chance*100)/5));

    const saveKey='clicker.save.v1';

    // --- State
    let state = {
      score: 0,
      perClick: 1,
      multLvl: 0,
      autos: 0,
      crit: 0.03,  // 3%
      bestCps: 0,
      start: Date.now()
    };

    // Load save
    try{ Object.assign(state, JSON.parse(localStorage.getItem(saveKey) || '{}')); }catch{}

    // --- DOM
    const el = (id)=>document.getElementById(id);
    const orb = el('orb');
    const floatLayer = el('floatLayer');
    const scoreEl = el('score');
    const perClickEl = el('perClick');
    const cpsEl = el('cps');

    const buyMult = el('buyMult');
    const buyAuto = el('buyAuto');
    const buyCrit = el('buyCrit');
    const multInfo = el('multInfo');
    const autoInfo = el('autoInfo');
    const critInfo = el('critInfo');
    const multProg = el('multProg');
    const autoProg = el('autoProg');
    const critProg = el('critProg');

    const cps = ()=> state.autos * (1 + state.multLvl * 0.1);

    function updateUI(){
      scoreEl.textContent = fmt(state.score);
      perClickEl.textContent = state.perClick.toFixed(2);
      cpsEl.textContent = (cps()).toFixed(2);

      const multCost = priceMult(state.multLvl);
      const autoCost = priceAuto(state.autos);
      const critCost = priceCrit(state.crit);

      multInfo.textContent = `Level ${state.multLvl} â€¢ Cost: ${fmt(multCost)}`;
      autoInfo.textContent = `Owned ${state.autos} â€¢ Cost: ${fmt(autoCost)}`;
      critInfo.textContent = `Chance ${(state.crit*100).toFixed(0)}% â€¢ Cost: ${fmt(critCost)}`;

      buyMult.disabled = state.score < multCost;
      buyAuto.disabled = state.score < autoCost;
      buyCrit.disabled = state.score < critCost || state.crit >= 0.5;

      multProg.style.width = Math.min(100, (state.score / multCost) * 100) + '%';
      autoProg.style.width = Math.min(100, (state.score / autoCost) * 100) + '%';
      critProg.style.width = Math.min(100, (state.score / critCost) * 100) + '%';
    }

    function floatText(x,y,text){
      const d = document.createElement('div');
      d.className='float';
      d.textContent=text;
      d.style.left = x+'px';
      d.style.top  = y+'px';
      d.style.opacity='1';
      d.style.transform='translate(-50%, -20px)';
      floatLayer.appendChild(d);
      let t=0; const L=800;
      const tick=()=>{
        t+=16;
        d.style.top = (y - (t/16)*3) + 'px';
        d.style.opacity = (1 - t/L).toFixed(2);
        if(t<L) requestAnimationFrame(tick); else d.remove();
      };
      requestAnimationFrame(tick);
    }

    // Click handler with crits
    orb.addEventListener('click', (e)=>{
      const rect = orb.getBoundingClientRect();
      const x = e.clientX - rect.left + rect.x;
      const y = e.clientY - rect.top + rect.y;

      const isCrit = Math.random() < state.crit;
      const gain = state.perClick * (isCrit ? 5 : 1);
      state.score += gain;

      floatText(x,y, `+${fmt(gain)}${isCrit?' âœ¨':''}`);
      updateUI();
    });

    // Passive loop
    let last = Date.now();
    setInterval(()=>{
      const now = Date.now();
      const dt = (now - last)/1000;
      last = now;
      const inc = cps() * dt;
      if(inc>0){
        state.score += inc;
        state.bestCps = Math.max(state.bestCps, cps());
        updateUI();
      }
    }, 50);

    // Buy buttons
    buyMult.onclick = ()=>{
      const cost = priceMult(state.multLvl);
      if(state.score >= cost){
        state.score -= cost;
        state.multLvl++;
        state.perClick = Math.round((state.perClick * 1.25 + Number.EPSILON) * 100)/100;
        updateUI();
      }
    };
    buyAuto.onclick = ()=>{
      const cost = priceAuto(state.autos);
      if(state.score >= cost){
        state.score -= cost;
        state.autos++;
        updateUI();
      }
    };
    buyCrit.onclick = ()=>{
      const cost = priceCrit(state.crit);
      if(state.score >= cost && state.crit < 0.5){
        state.score -= cost;
        state.crit = clamp(state.crit + 0.02, 0, 0.5);
        updateUI();
      }
    };

    // Reset
    document.getElementById('reset').onclick = ()=>{
      if(!confirm('Reset your save?')) return;
      state = { score:0, perClick:1, multLvl:0, autos:0, crit:0.03, bestCps:0, start:Date.now() };
      updateUI(); save();
    };

    // Autosave
    function save(){ localStorage.setItem(saveKey, JSON.stringify(state)); }
    setInterval(save, 1500);

    updateUI();
  </script>
</body>
</html>
